import scrapperAlt from './scrapperAlt.js';
import scrapper from './scrapper.js';
import { getDist } from './utils.js';
import e from 'express';
export class BaseCat {
	constructor(scrapper, name, type, radius, code) {
		this.scrapper = scrapper;
		this.name = name;
		this.type = type;
		this.maxRadius = radius;
		this.code = code;
	}
	async getDist(entryInfo, cities) {
		if (entryInfo.details['Serviço de Finanças']) {
			let city = entryInfo.details['Serviço de Finanças'];
			if (city.includes('-')) city = city.split('-')[0];
			if (cities[city]) {
				entryInfo.details['GPS Latitude'] = cities[city].lat;
				entryInfo.details['GPS Longitude'] = cities[city].lon;
			} else {
				const coord = await this.scrapper.getCity(city);
				if (coord) {
					entryInfo.details['GPS Latitude'] = coord.lat;
					entryInfo.details['GPS Longitude'] = coord.lon;
					cities[city] = { lat: coord.lat, lon: coord.lon };
				} else {
					console.warn('No coordinates for ', city);
				}
			}
		}
		getDist(entryInfo);
	}

	async getActiveEntries(cached, cities) {
		const entries = {};
		const ids = await this.scrapper.getIds(cached, this.code);
		for (const id of ids) {
			const entryInfo = await this.scrapper.getEntryInfo(cached, id);
			await this.getDist(entryInfo, cities);
			entries[id] = entryInfo;
		}
		return entries;
	}
}
export class PropertiesCat extends BaseCat {
	constructor() {
		super(
			scrapper,
			'Properties',
			'Imóvel',
			30,
			'8206AFA87BFAFA9E462582FDD250D86756E6204350834F322239D90AC95C0231C69D8050C8F77FAA2E8094900134E54CF223ACAB518CF2631DF5F1305E96D198F6334DC6597F25E821350603D39AB7820C5FB74ADD1BE6B6B8A5E67D3F59A9028BEC162A49C628072A7ABB447D63A27038910E6DB48AA413EB99222F7D4FCDE370E75F3D5782CF74E0D7737336384FB7EF8CBE7DAE200166A71D6837CEE1611132D1F5E4DE258A52ADE72DDA089BC95F5279F48D6BFAF6025E987E2602189B6D0B93BC9E571FFBF09D3382E2D7C136179ACADC5813AAA900076E5965A36A2ED7D55A13E6056F6C3A640939CD2EA599CE138AA23CC091F306330574E7F4EAE24AC02DA52EEF87E0F80A677932D0BC46555519046D3355F4F169C63A6FE8AA70836706D0756BD7032397A5DA8E2D93629768CB4218177DEE8753E68ADADDC1124C069CDA20BFECADDC6CCB1B0C387B6F1201DF1D9F1E650C53F93F4497EF43D5B7E61B98C0E70C1F32D4BD37B6A0BB7EF3A8FD934DD571808999F8E1E5EDD49B1B0252417940D94A743043E6B511F0822F54815BCBC5BD325E8BCC73B7E24295675B9071DB681A8C9CEF79E0B7A3A4F42CFA9918D829C34EDD36007579D8F0B9EC'
		);
	}
}
export class VehiclesCat extends BaseCat {
	constructor() {
		super(
			scrapper,
			'Vehicles',
			'Veículo',
			50,
			'405818D7E7587BD6C640274D95644F88613EDBE9C975C31528FE790D665306009F04E7026AE4FC7E5C08D2E681308D5C46D5139BA385409AC5BC29A0844C5C8DECF994AD00B103719033065B3B8F98A2333B904ECF2674D9D44F17B467DB681625775834E6316CCD86E18450AE304966AF020E4965AF797ED7892AD8E1D0ACFE51DA3EA5D1BDFFE752537722706D2F31D27E155DC3AEADDCA8FB70AB461A9189A4E7D626F0F31A1E45812EC0D36FDCD1E88874B5CD589126E9C7A9D319A3E645FE3CA44158C908BE431BFEBD4D5C656DBAE85AA3A28C812AF134DC140323479A60D3BEA93F8B3F29DE4995BE3E9991E2202CC0F77B66CF4C2B886F7640FEA8D91B63FE5E37A63D4C4DE4635F3F79B95DB80A3AC894628E1E6919B5D0B3F746653DBD0C6F988FE22B0E39F6D056501AE0C99D57F74B8C792BAB5949C6E79BD0037244F3A5E4B2CA31B6FC55527597796CE7238DD93FB6D88F3FE339BDB89D277909750780D33D2CC89AFF3BAE24C39314FCA9F077D05C6FD61FEE57790566D17F38564CD5BFA97E03F3B58EE1007DB721C28D70CE0719EC71E40C4BAE7AE549F86C5E09F267D3049442B7C3485F601CF20D8D2CB806023677B9BED8039834CEBD'
		);
	}
}
export class EquipmentsCat extends BaseCat {
	constructor() {
		super(
			scrapper,
			'Equipments',
			'Equipamento',
			50,
			'C02D8C2C037EC5631C157E1EAC60E96DB16D72B08B3D6F21D33B398CF36F699EF6B945B1550DB029C2B5D14110564315E0582408CE1594A7BED93431338B9B49C4C163AF12F970B0E3EA371D6C57AA74A4000115C5ED3E3141FCF803662C16BA53473CB2A9AAB98AD72CA63978FEF95DD87DFAFB0FFA1B03B890AD5E3775E300B339900B5663E6C9923C1FBE04CADD68359251FAB8018EB0D2A71BA3D4DFD92A27A2A56DF220710C0AE3A3E7C4F3706ABCFE331AF5763F16787F5DAB9433AE188BC9A4C6771B2FA708F5E27315994C6FB74238CA6D86602E212B125397B2A067D9536B5A4D9B527E9AA48061F5639AE38D2A4C82C9B326E16E77FBC58421DFBBCCBA421C377F903E36EC0E18EE7C78C5D10E8157A221EF7332DC0CE2EF02676FAA7053887E0749BFF651E2515EBD985AD33A6769FA9FE7D397CC392FFD2536396B10B7FA345A6DB3D90EF527CDE99AD8F7632245E75CCDE0E1AE48139761BB0892498AA9F2F33479E2C607260D4C59262E6EF9D4A4E815CA855AE0D47B71D5BC1BEBF2C7308591D4F5376E1472CECF519093512FDB597EEDCC98334CDF13B156702EF4BF63193470D56ACE06DB18104A82646AFA6A6AAFD97166595638891330'
		);
	}
}
export class FurnitureCat extends BaseCat {
	constructor() {
		super(
			scrapper,
			'Furniture',
			'Mobiliário',
			50,
			'6627DB5CD05B6AB32BF1336EEB0EADB70291DF5F8D96EF44DE45E23F86A8C4714309192E105B0CA7448442E606B697BF8282A4014B5A5548CE3D71EC5B0ECAD2069352E78FA3649961B474CF38D9349D25AE697A9CF370EBB5FAF583EF6BA85CE88CE344291278FB5944B24118A34FBE4A2873CC1566C9E9A5C2EB6CFF20ED9985714355777BF86C52D51E3FB6F10879426FC58A4217F0FB9CDF7C573560EC7E302F77A65A73CB24BB205BA77C3F5F701A998EE8FCA758EF4D201625398404E55B92C696E58388C1ACDBE0AC7EEB929007E7728CE34C225CF34C0F8D3168A0395B8E01ABDAB19BD89E5B8274A34C8D333E5574AC64B75ED00DA3FC1A17DFF2B1DC8978DD13A65570C9A1E4233333969EC23D36D52F384CA46EAA0493F8A9B2C6988D5BEF9EBF2DD125E7C62197BAB84BF8676B2FFBB9DB57CE3D231DFA723AA7CE408555CC7A15C8612C2CFEECC128B47EB93115E4735AE1568F8D68C090E55A8B2AECDD6C2CA4876D3741A04AD19CE5950BC4822A054C73D6E7EA94F0381F40D360AF6A38E1A782CECAAA355647C05D85252389DBBE241E8E60E42C39DA144AA467F5A64068BBE2E08EC1C7EF04CCF4393337F1F3EC7D38F34ADDBF2F72290F'
		);
	}
}
export class MachinesCat extends BaseCat {
	constructor() {
		super(
			scrapper,
			'Machines',
			'Máquina',
			50,
			'2AD914386A50064C347757FA68AB1035E9577F9632AEF34B705E022091B1020A81C21005EF5D580BC201A19FD0EE6FA50A1A1819B80541845D42FB184CE29B4C8FDF4ACD525332A6319EC3667F9F6DAD2AC6F84697866638F4374C662F599EB2B48CFB10EF320B0B7E838681D40B2094B127E6236DE0B46B52A32228510D3B16B6DDC4DCE901A72BDAA89994F86F40BFB93CE70931CA7B16A0CDB3167239487F77A8B470A9983EFA1C7832656141F7E04EF8726D8BC7F4148526D7D139695DA36BCD2AF83AC2631FE04AB0706D1CF4299A7D0D2B95F7AE28CD99733B10BDA5ECB24815048F3275A71B8C3F3394AD877BF6251054C6F8568FFF2357CDA6E6683A1A65B823DD59FE625BF2A32F83A89C3FE0EAE8C11B0C58175850142B903BABD70D02BA78250F58A70BB50E480F87825F82A6D6D91D38E3AA3D7580B53294179CBDB093CBFDE0CB8C40B3BCF6C5E574C9A5C068ABDD3903C32222A152544C56227AE6524FE644972CA84F6B34D963A82493015753ED09059C978B8F6228A553A25B7E68E360AFD47F4848A961B4F53AB23AB415EF59482640D0D43129CFE8A221C762CC196A3B3D9832E11632C3AB2AD95A638BC26957E2451B331556B83F4B55'
		);
	}
}
export class RightsCat extends BaseCat {
	constructor() {
		super(
			scrapper,
			'Rights',
			'Direito',
			30,
			'9C45D96D8D8BBC9A9E569539EE9F0A699509C00A91208F1D39B22043437F79EB5BD94608379B1751BB24431571A31DC20304D93003CD3C7E2B7E21E257949F6655EF6F28CA939F22B22DC48D66A10C5483A70E32898731A75593574E4A4C9841AB4F37B283C16E214A6572B0A77C9CDE4EFE4F15D5424C285C05B02F98DCE3887B723ACFE8D20251958D3D169E4657E53E3D6F399FCE9946FEF75B78C665A6D425EA25757D41995AA2DC767E18BF4476C36ED0AEC8334D3135CD4B48F9D22B2DE312505DEAE333C9CAE89B94E216C34BDEC696E4713DD51CAFFB6522797560922A654BC112DBF26BC0547AA121B014A2508524C432A87A864379644A4C5FF93CC05819AE76FD640890D98FB8ADD559F372EDE875181C801C6EA355CBC83202F40C63EA613D0029A0EB1AD07B67BD766C91C7B001E7DB19EDBC0299D0915E869FB6B8ACC2259C873910CE6F03EF6A8D96987DD0BADEA229FA458FD067FCF0BFE23D88E11C28A4794F4C4A4EA96D4380C0248B6042664D2DA7E4A24B71856E1743A3981A4B62B2E287B78B68BE0444F23395B80F75983DB824DAA4268FBBBA7B77EAAF4C747CE45E88C2B5127E1AD97609260362F3FC3E5F0B01450E4D9A93A5AC'
		);
	}
}

export class Financas extends BaseCat {
	constructor() {
		super(scrapperAlt, 'Financas', 'Financas', 30, '');
	}
}
